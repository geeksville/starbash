[repo]
kind="processed-target"

# This is auto generated at the root of a session processing tree
# it is initially auto populated based on the best guess of starbash, but the user
# can hand customize as needed

[about] # (if not present this section will be auto generated at processing time)

# this section contains textual information the user might want to share on social media or whatever
# some of it comes from FITS headers gleaned during processing or other statistics

target.id = "NGC281"
# target.name = "Some Big Nebula"
# target.ra = "123.45"
# OBJCTRA = '00 23 44'           / [H M S] RA of imaged object
# OBJCTDEC= '+89 55 28'

[stages]
# Information about recipes used for processing or excluded by the user
# If you'd like to pick something different just comment out the line in USED and uncomment the line in
# excluded.
# Whenever stabash is rerun it will update these arrays based on what was actually used for this run.
used = [
    "osc/dual_duo.toml",
    "master_bias",
    "master_flat",
    "master_dark",
]
excluded = [
    "osc/single_duo.toml",
]

[[sessions]]
# Session #1
start = 1979-05-27T07:32:00    # first date of observation
end = 1979-05-27T11:45:00      # last date of observation
date = 1979-05-27T07:32:00     # date of processing
num-frames = 45                # Total number of times
exposure = 120                 # Average exposure in seconds
filter = "HaOiii"              # all images of a session are guaranteed to have the same filter
metadata.FOO = "blah"

[sessions.masters.flat]
excluded = [
    "foo/blah/blah2.fits", # this is a scored candidate
    "foo/blah/blah3.fits"
]
used = [
    "foo/blah/blah.fits",
]

# master.bias, master.dark would be similar if needed

# either images.url or images.dir must be present

# URL for where the raw images are for this session.  We assume a "*.fit*" glob will be
# appended to this base URL to find all the images of this session
images.url = "file:///images/ngc281/session1/light/frame" # the directory for these images

# a sub directory relative to the location of this toml file directory
images.dir = "2025-09-01/light"

# if present it will be a full array listing the filenames of all images used in this session
# we assume it is unlikely users of the toml file will want FITS headers from each file
# so to keep our toml small we don't use an Array-of-tables.
# Unlikely to ever be used/populated except for debugging or very small sessions.
# if not present - generated dynamically at load time from imagesbase+"*.fit*"
# images = [ "file://images/ngc281/session1/light/frame0001.fits" ]

[sessions.options]

# various other candidates for this session that were found automatically
# these lists are sorted with the presumed most desirable candidate first.  If master.flat (or whatever)
# is not specified above the first entry in this list will be used.
master.flat = [
    "/blag/blah.fits", # score 405: good date etc...
    "/blag/blah2.fits" # score 607: less good date etc...
    ]
master.dark = [""]
master.bias = [""]

[sessions.author]

# The creator of this image session
# (if not present this section will be auto generated at processing time)
# this whole secion is auto copied from userprefs.sb.toml
name = "Bob Dude"
email = "foo@foo.com"
website = "http://mydomain.com/astocruft"
license = "Creative commons etc..."



[[sessions]]
# Session #2
start = 1979-05-27T07:32:00    # first date of observation
end = 1979-05-27T11:45:00      # last date of observation
date = 1979-05-27T07:32:00     # date of processing
num-frames = 45                # Total number of times
# same sort of content as sessions #1

[processing]

# later during preprocessing information and attribution for recipe/tool usage etc will be added here

[processing.citation]

# The creator of this image session
# (if not present this section will be auto generated at processing time)
# this whole secion is auto copied from userprefs.sb.toml
# The format of this session is compatible with the Citation File Format (CFF)
# see https://github.com/citation-file-format/citation-file-format/blob/main/schema-guide.md
# for details.
# The only difference is to facilitate toml parsing we use an = sign instead of :
# if/when .cff file exports are required we'll do that conversion then.
message = "If you use this image please cite it below.  I liked making it."
cff-version = "1.2.0"
title = "My Research Software"
version = "2.0.4"
doi = "10.5281/zenodo.1234"
date-released = "2017-12-18"
url = "https://github.com/github-linguist/linguist"

[[processing.citation.authors]]
family-names = "Lisa"
given-names = "Mona"
orcid = "https://orcid.org/0000-0000-0000-0000"

[[processing.citation.authors]]
family-names = "Bot"
given-names = "Hew"
orcid = "https://orcid.org/0000-0000-0000-0000"


[processing.recipe]

# if specified a specific recipe will be used, otherwiase one will be chosen and run
# automatically
# Starbash will search all recipe repos to find this by name
url = "http://foo.blah/osc-dual-duo"

# other standard recipes...
# osc-duo, osc-broadband
# mono-sho (fixme find other names used in mono workflow land)

# a default starbash file for a particular processed target will typically contain only the preceeding

[processing.recipe.options]
# elegible recipes available for use, if one was not specified above the first recipe in this list will be used
url = ["file:///blah/blah/recipes/osc-broadband.toml"]